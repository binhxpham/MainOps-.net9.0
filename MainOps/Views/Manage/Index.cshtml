@model IndexViewModel
@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["Profile"];
    ViewData.AddActivePage(ManageNavPages.Index);
}

<h4>@ViewData["Title"]</h4>
@await Html.PartialAsync("_StatusMessage", Model.StatusMessage)
<div class="row">
    <div class="col-md-4">
        <form method="post">
            <div asp-validation-summary="All" class="text-danger"></div>
            <table border="1" style="width:100%;table-layout:fixed;">
                <tr>
                    <td><label asp-for="Username">@SharedLocalizer.GetLocalizedHtmlString("Username")</label></td>
                    <td><input asp-for="Username" class="form-control" /></td>                   
                </tr>
                <tr>
                    <td><label asp-for="photopath">@SharedLocalizer.GetLocalizedHtmlString("Path to photo")</label></td>
                    @if (Model.photopath != "")
                    {
                        <td><img src="@Model.photopath" /></td>
                    }
                    else
                    {
                        <td>@SharedLocalizer.GetLocalizedHtmlString("Already Uploaded")</td>
                    }
                </tr>
                <tr>
                    <td><label asp-for="FirstName">@SharedLocalizer.GetLocalizedHtmlString("First Name")</label></td>
                    <td><input asp-for="FirstName" class="form-control" /></td>
                </tr>
                <tr>
                    <td><label asp-for="LastName">@SharedLocalizer.GetLocalizedHtmlString("Last Name")</label></td>
                    <td><input asp-for="LastName" class="form-control" /></td>
                </tr>
                <tr>
                    <td><label asp-for="Email">@Localizer["Email"]</label></td>
                    @if (Model.IsEmailConfirmed)
                    {
                        <td>
                            <input asp-for="Email" class="form-control" />
                            <span class="input-group-addon" aria-hidden="true"><span class="glyphicon glyphicon-ok text-success"></span></span>
                        </td>
                    }
                    else
                    {
                        <td>
                            <input asp-for="Email" class="form-control" />
                            <button asp-action="SendVerificationEmail" class="btn btn-link">@SharedLocalizer.GetLocalizedHtmlString("Send verification email")</button>

                        </td>
                    }
                </tr>
                <tr>
                    <td><label asp-for="PhoneNumber">@SharedLocalizer.GetLocalizedHtmlString("Phone Number")</label></td>
                    <td>
                        <input asp-for="PhoneNumber" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <button type="submit" class="btn-hoelscher">@SharedLocalizer.GetLocalizedHtmlString("Save")</button>
                    </td>
                </tr>
            </table>
        </form>
        <form asp-action="UploadPhoto" asp-controller="Manage" enctype="multipart/form-data" method="post">
            <table border="1" style="width:100%;table-layout:fixed;">
                <tr>
                    <td><input type="file" name="files" accept=".jpg" /></td>
                </tr>
                <tr>
                    <td><button type="submit" class="btn-hoelscher">@SharedLocalizer.GetLocalizedHtmlString("Upload Photo")</button></td>
                </tr>
            </table>
        </form>        
        <form asp-action="DeleteAccount" id="toDelete" method="post">
            <table border="1" style="width:100%;table-layout:fixed;">
                <tr>
                    <td colspan="2">
                        <input type="hidden" asp-for="Email" />
                        <button type="button" value="Delete Account" id="buttonDel" class="btn btn-default">@Localizer["Delete Account"]</button>
                    </td>
                </tr>
            </table>
        </form>
    </div>
    <div class="col-md-8">
        <h3>@SharedLocalizer.GetLocalizedHtmlString("User Log")</h3>
        <form asp-action="UpdateLog" asp-controller="Manage" method="post">
            <table>
                <tr>
                    <td>
                        <textarea asp-for="UserLog" name="UserLog" cols="82" rows="20" style="width:100%;"></textarea>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="btn-hoelscher">@SharedLocalizer.GetLocalizedHtmlString("Update Log")</button>
                    </td>
                </tr>
            </table>
            
           
        </form>
    </div>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script>
        $('#buttonDel').click(function () {
            var result = confirm(@Localizer["Are you sure you want to delete this user profile?"]);
            if (result) {
                $('#toDelete').submit();
            }
            else {
            }
        })
    </script>
}

@model MainOps.Models.SedimentationSiteReport
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Sedimentation Site Check</title>
    <link rel="stylesheet" href="@Url.Content("~/css/pdfcss.css")" />
</head>
<body>
    <table style="width:100%;">
        <tr>
            <td colspan="3">
                <b>@SharedLocalizer.GetLocalizedHtmlString("Sedimentation Site Check")</b>
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.Project.Name)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.Project.Name)
            </td>
            <td rowspan="4" align="right"><img src="~/images/Divisions/Photos/@Model.Project.DivisionId/@Model.Project.Division.LogoPath" width="151" height="66" /></td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.Project.ProjectNr)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.Project.ProjectNr)
            </td>
        </tr>
        @if (Model.SubProjectId != null)
        {
            <tr>
                <td style="text-align:left;">
                    <b>
                        @Html.DisplayNameFor(Model => Model.SubProject.Name)
                    </b>
                </td>
                <td>
                    @Html.DisplayFor(Model => Model.SubProject.Name) : @Html.DisplayFor(Model => Model.SubProject.SubProjectNr)
                </td>
            </tr>
        }
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.Project.Client)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.Project.Client)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.PlantId)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.PlantId)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.SedimenationCleanedAndEmptied)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.SedimenationCleanedAndEmptied)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.SedimentationShouldBeEmptiedAndCleaned)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.SedimentationShouldBeEmptiedAndCleaned)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.SedimentationMinimumWater)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.SedimentationMinimumWater)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.SedimenationFlowRate)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.SedimenationFlowRate)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.OilSeperatorClogged)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.OilSeperatorClogged)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.GeoTubeExchanged)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.GeoTubeExchanged)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.GeoTubeShouldBeExchanged)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.GeoTubeShouldBeExchanged)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.SiteCheckPerformed)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.SiteCheckPerformed)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.AccessWays)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.AccessWays)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.Leakages)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.Leakages)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.Safety)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.Safety)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.AcidExchanged)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.AcidExchanged)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.AcidShouldBeExchanged)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.AcidShouldBeExchanged)
            </td>
        </tr>
        <tr>
            <td style="text-align:left;">
                <b>
                    @Html.DisplayNameFor(Model => Model.AlarmFunction)
                </b>
            </td>
            <td>
                @Html.DisplayFor(Model => Model.AlarmFunction)
            </td>
        </tr>

        <tr>
            <td><b>@Html.DisplayNameFor(Model => Model.DoneBy)</b></td>
            <td>
                @Html.DisplayFor(Model => Model.DoneBy)
            </td>
        </tr>
        <tr rowspan="6">
            <td colspan="3" style="text-align:left;">
                @if (Model.Comments != null && Model.Comments != "")
                {
                    @Html.Raw(Model.Comments.Replace("\r\n", "<br />"))
                }
                else
                {
                    @Html.DisplayFor(Model => Model.Comments)
                }
            </td>
        </tr>

        <tr>
            <td colspan="3">@SharedLocalizer.GetLocalizedHtmlString("Photos")</td>
        </tr>
        <tr>
            <td colspan="3">
                <table name="phototable" style="page-break-inside:avoid;width:100%;table-layout:fixed;">
                    @{ var rows = 0;}
                    @if (Model.Photos.Count % 3 == 0)
                    {
                        rows = Model.Photos.Count() / 3;
                    }
                    else
                    {
                        rows = Convert.ToInt32(Model.Photos.Count() / 3) + 1;
                    }
                    @{ var totalpics = Model.Photos.Count();}
                    @for (int i = 0; i < rows; i++)
                    {
                        @if (totalpics - 3 >= 0) //enough room to add whole row
                        {


                            <tr>
                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }


                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }


                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 2).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3 + 2).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 2).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3 + 2).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }

                            </tr>
                            totalpics -= 3;
                        }
                        else if (totalpics - 2 >= 0)
                        {


                            <tr>
                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }
                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3 + 1).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }

                                <td style="width:100%;"></td>
                            </tr>
                            totalpics -= 2;
                        }
                        else //enough room to add 1 picture in row
                        {
                            <tr>
                                @try
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[0],"_edit.jp",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".jp")[1])" style="width:100%;" /></td>
                                }
                                catch
                                {
                                    <td style="width:100%;"><img src="@String.Concat(Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[0],"_edit.JP",Model.Photos.ElementAt((i+1)*3 - 3).Path.Split(".JP")[1])" style="width:100%;" /></td>
                                }
                                <td style="width:100%;"></td>
                                <td style="width:100%;"></td>
                            </tr>
                            totalpics -= 1;
                        }

                    }
                </table>
            </td>
        </tr>




    </table>

</body>
</html>





